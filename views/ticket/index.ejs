<!DOCTYPE html>
<html lang="fr">
  <%- include('../shared/head', {title:"tickets",css: ['index', 'navbar']}) %>
  <body>
    <%- include('../shared/navbar', {admin}) %>
    <div>
      <h1>List of tickets</h1>
      <table>
        <thead>
          <tr>
            <th class="idTicket">Tichet ID</th>
            <th class="idTicket">Title</th>
            <th class="showTicket">created By</th>
            <th class="showTicket">assigned To</th>
            <th class="showTicket">show Ticket</th>
            <th class="editTicket">Edit Ticket</th>
            <th>Status</th>
          </tr>
        </thead>
        <tbody>
          <% for (index = 0; index < tickets.length; index++) { %> <% const ticket = tickets[index]
          %>
          <tr key="{index}">
            <td><%= ticket._id %></td>
            <td><%= ticket.title %></td>
            <td><%= ticket.creator.email %></td>
            <td>
              <% if( ticket.responsible!== null && "email" in ticket.responsible){
              %><%=ticket.responsible.email %> <% } %>
            </td>
            <td><a href="/ticket/<%= ticket._id %>" class="nav-link">view</a></td>
            <td><a href="/ticket/<%= ticket._id %>/edit" class="nav-link">edit</a></td>
            <td>
              <span <% if(ticket.completed){ %>
                class="status_completed status_span" <% }else{ %>class="status_incomplete
                status_span" <% } %>>
              </span>
            </td>
          </tr>
          <% } %>
        </tbody>
      </table>
    </div>
  </body>
</html>
